<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros({
    url : 'ws://10.42.0.1:8080'
  });

  ros.on('connection', function() {
    console.log('Connected to websocket server.');
  });

  ros.on('error', function(error) {
    console.log('Error connecting to websocket server: ', error);
  });

  ros.on('close', function() {
    console.log('Connection to websocket server closed.');
  });

  // Publishing a Topic
  // ------------------

    // We first create a Topic object with details of the topic's name
    // and message type. Note that we can call publish or subscribe on the same topic object.
    var talker = new ROSLIB.Topic({
      ros : ros,
      name : '/state',
      messageType : 'std_msgs/String'
    });

    var index = 0;
    $(document).ready(function () {
     $("#button1").click(function() {
       var string = new ROSLIB.Message({
         data : "EXPLORING"
       });
       talker.publish(string);
       console.log("publishing..." + string.data);
       $(this).button('reset');
     });
     $("#button2").click(function() {
       var string = new ROSLIB.Message({
         data : "HOME_RETURN"
       });
       talker.publish(string);
       console.log("publishing..." + string.data);
       $(this).button('reset');
     });
     $("#button3").click(function() {
       var string = new ROSLIB.Message({
         data : "STOPPED"
       });
       talker.publish(string);
       console.log("publishing..." + string.data);
       $(this).button('reset');
     });


    });
    </script>
  </head>

  <body>
    <h1></h1>
    <div id="modal" class="container">
      <div class="panel panel-default">
        <div class="panel-heading">
          Ping-Pong Robot
        </div>
        <div class="panel-body">

          <p> Controles del robot</p>
          <button type="button" id="button1"  data-publishing-text="Publishing..." class="btn btn-default" autocomplete="off" >Exploration</button>
          <button type="button" id="button2"  data-publishing-text="Publishing..." class="btn btn-default" autocomplete="off" >Go Home</button>
          <button type="button" id="button3"  data-publishing-text="Publishing..." class="btn btn-default" autocomplete="off" >Stop</button>
        </div>
        </div>
      </div>
  </body>
  </html>
